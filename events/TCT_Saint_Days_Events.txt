###############################################################################
# 
# Saint's Day Celebration Event
# 
# 
###############################################################################

namespace = TCT_saint_days

TCT_saint_days.0001 = {
	type = character_event
	title = TCT_saint_days.0001.t
	desc = {
		random_valid = {
			desc = TCT_saint_days.0001.desc.a
			desc = TCT_saint_days.0001.desc.b
			desc = TCT_saint_days.0001.desc.c
			desc = TCT_saint_days.0001.desc.d
		}
	}
	theme = family
	
	left_portrait = {
		character = scope:family
		animation = happiness
		trigger = {
			exists = scope:family
		}
	}
	
	right_portrait = {
		character = root
		animation = ecstasy
	}

	cooldown = { years = 3 }

	immediate = {
		scope:story.var:saint_day_saint = {
			save_scope_as = localsaint
		}
			
		random_List = {
			50 = {
				primary_spouse ?= {
					save_scope_as = family
				}
			}
			50 = {
				random_child ?= {
					save_scope_as = family
				}
			}
		}	
		root.capital_province ?= {
			save_scope_as = provincefun
		}
	}

	option = { #start activity
		name = TCT_saint_days.0001.a
		trigger = {
			NOT = {	has_character_flag = hosted_saint_day }
		}
		trait = zealous
		add_internal_flag = special
			add_character_flag = {
				flag = opening_window
				days = 2
			}
			add_character_flag = {
				flag = hosting_saint_day
				years = 1
			}
		custom_tooltip = TCT_saint_days.0001.a.tooltip
		ai_chance = {
			base = 15
			ai_value_modifier = {
				ai_zeal = 1
				ai_greed = -0.5
			}
			modifier = {
				add = 5
				OR = {
					has_trait = zealous
					has_trait = diligent
					has_trait = ambitious
					has_trait = just
					has_trait = gregarious
					has_trait = lifestyle_reveler
					has_trait = drunkard
				}
			}
			modifier = {
				factor = 5
				OR = {
					has_trait = vengeful
					has_trait = sadistic
					has_trait = callous
					has_trait = arbitrary
					has_trait = wrathful
				}
			}
		}
	}

	option = { #ok
		name = TCT_saint_days.0001.b
		add_stress = minor_stress_loss
		ai_chance = {
			base = 10
		}
	}

	option = { #family
		name = TCT_saint_days.0001.c
		every_close_family_member = {
			limit = {
				NOR = {
					has_relation_rival = root
					has_relation_potential_rival = root
				}
			}
			add_opinion = {
				modifier = TCT_saintdaysaint_opinion
				target = root
				opinion = 5
			}
		}
		ai_chance = {
			base = 5
		}
	}

	after = {
		if = {
			limit = {
				has_character_flag = opening_window
			}
			trigger_event = TCT_saint_days.0002
		}
	}
}

TCT_saint_days.0002 = {
	hidden = yes 

	immediate = {
		open_view_data = {
			view = activity_list_detail_host_window
			data = activity_type:activity_TCT_saint_days
			player = root
		}
	}
}

#travel start
TCT_saint_days.0003 = {
	type = character_event
	title = TCT_saint_days.0003.t
	desc = TCT_saint_days.0003.desc
	theme = travel

	left_portrait = root

	
	trigger = {
		is_available_travelling = yes
		is_landed = yes
		exists = involved_activity
		involved_activity = {
			has_activity_type = activity_TCT_saint_days
		}
	}

	immediate = {
		play_music_cue = mx_cue_travel_start
	}

	# Ok
	option = { 
		name = TCT_saint_days.0003.a
	}
}

# Arrival
TCT_saint_days.0004 = {
	type = activity_event
	title = TCT_saint_days.0004.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:activity = {
                        AND = {
						    has_activity_option = {
						    	category = TCT_saint_days_cost_type
						    	option = TCT_saint_days_cost_type_small
						    }
                            has_activity_option = {
						        category = TCT_saint_days_procession_type
						        option = TCT_saint_days_procession_type_modest
						    }
                        }
					}
				}
				desc = TCT_saint_days.0004.desc.a
			}
			triggered_desc = {
				trigger = {
					scope:activity = {
                        AND = {
						    has_activity_option = {
						    	category = TCT_saint_days_cost_type
						    	option = TCT_saint_days_cost_type_small
						    }
                            has_activity_option = {
						        category = TCT_saint_days_procession_type
						        option = TCT_saint_days_procession_type_sizeable
						    }
                        }
					}
				}
				desc = TCT_saint_days.0004.desc.b
			}
            triggered_desc = {
				trigger = {
					scope:activity = {
                        AND = {
						    has_activity_option = {
						    	category = TCT_saint_days_cost_type
						    	option = TCT_saint_days_cost_type_small
						    }
                            has_activity_option = {
						        category = TCT_saint_days_procession_type
						        option = TCT_saint_days_procession_type_grand
						    }
                        }
					}
				}
				desc = TCT_saint_days.0004.desc.c
			}
            triggered_desc = {
				trigger = {
					scope:activity = {
                        AND = {
						    has_activity_option = {
						    	category = TCT_saint_days_cost_type
						    	option = TCT_saint_days_cost_type_large
						    }
                            has_activity_option = {
						        category = TCT_saint_days_procession_type
						        option = TCT_saint_days_procession_type_modest
						    }
                        }
					}
				}
				desc = TCT_saint_days.0004.desc.d
			}
            triggered_desc = {
				trigger = {
					scope:activity = {
                        AND = {
						    has_activity_option = {
						    	category = TCT_saint_days_cost_type
						    	option = TCT_saint_days_cost_type_large
						    }
                            has_activity_option = {
						        category = TCT_saint_days_procession_type
						        option = TCT_saint_days_procession_type_sizeable
						    }
                        }
					}
				}
				desc = TCT_saint_days.0004.desc.e
			}
            triggered_desc = {
				trigger = {
					scope:activity = {
                        AND = {
						    has_activity_option = {
						    	category = TCT_saint_days_cost_type
						    	option = TCT_saint_days_cost_type_large
						    }
                            has_activity_option = {
						        category = TCT_saint_days_procession_type
						        option = TCT_saint_days_procession_type_grand
						    }
                        }
					}
				}
				desc = TCT_saint_days.0004.desc.f
			}
		}
	}
	theme = faith
	
	right_portrait = {
		character = scope:host
		animation = thinking
	}

	left_portrait = {
		character = scope:attendee
		animation = happiness
		trigger = {
			exists = scope:attendee
		}
	}

	immediate = {
		scope:activity = {
			activity_location = {
				save_scope_as = location
			}
			random_attending_character = {
				limit = {
					NOT = { this = root }
				}
				save_scope_as = attendee
			}
		}
	}
	
	option = { # Ok
		name = TCT_saint_days.0004.a
        if = {
			limit = {
				scope:activity = {
                    AND = {
                        has_activity_option = {
                            category = TCT_saint_days_cost_type
                            option = TCT_saint_days_cost_type_small
                        }
                        has_activity_option = {
                            category = TCT_saint_days_procession_type
                            option = TCT_saint_days_procession_type_modest
                        }
                    }
                }
			}
			add_piety = 10
            dynasty = {
				add_dynasty_prestige = { 0 RICE_ancestor_max_dynasty_prestige_small_value }
			}
            every_close_family_member = {
				limit = {
					NOR = {
						has_relation_rival = root
						has_relation_potential_rival = root
					}
				}
                add_opinion = {
                    modifier = TCT_saint_days_procession_opinion
                    target = root
                    opinion = 5
                }
            }
		}
		else_if = {
			limit = {
				scope:activity = {
                    AND = {
                        has_activity_option = {
                            category = TCT_saint_days_cost_type
                            option = TCT_saint_days_cost_type_small
                        }
                        has_activity_option = {
                            category = TCT_saint_days_procession_type
                            option = TCT_saint_days_procession_type_sizeable
                        }
                    }
                }
			}
			add_piety = 10
			add_prestige = 20
            dynasty = {
				add_dynasty_prestige = { 0 RICE_ancestor_max_dynasty_prestige_small_value }
			}
            every_close_family_member = {
				limit = {
					NOR = {
						has_relation_rival = root
						has_relation_potential_rival = root
					}
				}
                add_opinion = {
                    modifier = TCT_saint_days_procession_opinion
                    target = root
                    opinion = 10
                }
                add_character_flag = {
					flag = received_TCT_opinion
					days = 2
				}
            }
			hidden_effect = {
            	every_vassal = {
            	    limit = {
						NOT = { has_character_flag = received_TCT_opinion }
            	    }
            	    add_opinion = {
            	        modifier = TCT_saint_days_procession_opinion
            	        target = root
            	        opinion = 5
            	    }
            	}
			}
			custom_tooltip = TCT_saint_days.0004.opinion.tooltip.a
		}
		else_if = {
			limit = {
				scope:activity = {
                    AND = {
                        has_activity_option = {
                            category = TCT_saint_days_cost_type
                            option = TCT_saint_days_cost_type_small
                        }
                        has_activity_option = {
                            category = TCT_saint_days_procession_type
                            option = TCT_saint_days_procession_type_grand
                        }
                    }
                }
			}
			add_piety = 30
			add_prestige = 30
            dynasty = {
				add_dynasty_prestige = { 0 RICE_ancestor_max_dynasty_prestige_small_value }
			}
			every_close_family_member = {
				limit = {
					NOR = {
						has_relation_rival = root
						has_relation_potential_rival = root
					}
				}
                add_opinion = {
                    modifier = TCT_saint_days_procession_opinion
                    target = root
                    opinion = 15
                }
                add_character_flag = {
					flag = received_TCT_opinion
					days = 2
				}
            }
			hidden_effect = {
            	every_vassal = {
            	    limit = {
            	        NOT = { has_character_flag = received_TCT_opinion }
            	    }
            	    add_opinion = {
            	        modifier = TCT_saint_days_procession_opinion
            	        target = root
            	        opinion = 10
            	    }
					add_character_flag = {
						flag = received_TCT_opinion
						days = 2
					}
            	}
				scope:activity = {
					every_attending_character = {
						limit = {
            		        NOR = {
								this = root
								has_character_flag = received_TCT_opinion
							}
            		    }
            		    add_opinion = {
            		        modifier = TCT_saint_days_procession_opinion
            		        target = root
            		        opinion = 5
            		    }
            		}
            		activity_location.county = {
            		    add_county_modifier = {
							modifier = saint_days_procession
							years = 5
						}
            		}
				}
			}
			custom_tooltip = TCT_saint_days.0004.opinion.tooltip.b
		}
        else_if = {
			limit = {
				scope:activity = {
                    AND = {
                        has_activity_option = {
                            category = TCT_saint_days_cost_type
                            option = TCT_saint_days_cost_type_large
                        }
                        has_activity_option = {
                            category = TCT_saint_days_procession_type
                            option = TCT_saint_days_procession_type_modest
                        }
                    }
                }
			}
			add_piety = 10
            dynasty = {
				add_dynasty_prestige = { 0 RICE_ancestor_max_dynasty_prestige_large_value }
			}
			every_close_family_member = {
				limit = {
					NOR = {
						has_relation_rival = root
						has_relation_potential_rival = root
					}
				}
                add_opinion = {
                    modifier = TCT_saint_days_procession_opinion
                    target = root
                    opinion = 5
                }
            }
		}
        else_if = {
			limit = {
				scope:activity = {
                    AND = {
                        has_activity_option = {
                            category = TCT_saint_days_cost_type
                            option = TCT_saint_days_cost_type_large
                        }
                        has_activity_option = {
                            category = TCT_saint_days_procession_type
                            option = TCT_saint_days_procession_type_sizeable
                        }
                    }
                }
			}
			add_piety = 10
			add_prestige = 20
            dynasty = {
				add_dynasty_prestige = { 0 RICE_ancestor_max_dynasty_prestige_large_value }
			}
			every_close_family_member = {
				limit = {
					NOR = {
						has_relation_rival = root
						has_relation_potential_rival = root
					}
				}
                add_opinion = {
                    modifier = TCT_saint_days_procession_opinion
                    target = root
                    opinion = 10
                }
                add_character_flag = {
					flag = received_TCT_opinion
					days = 2
				}
            }
            hidden_effect = {
            	every_vassal = {
            	    limit = {
						NOT = { has_character_flag = received_TCT_opinion }
            	    }
            	    add_opinion = {
            	        modifier = TCT_saint_days_procession_opinion
            	        target = root
            	        opinion = 5
            	    }
            	}
			}
			custom_tooltip = TCT_saint_days.0004.opinion.tooltip.a
		}
        else_if = {
			limit = {
				scope:activity = {
                    AND = {
                        has_activity_option = {
                            category = TCT_saint_days_cost_type
                            option = TCT_saint_days_cost_type_large
                        }
                        has_activity_option = {
                            category = TCT_saint_days_procession_type
                            option = TCT_saint_days_procession_type_grand
                        }
                    }
                }
			}
			add_piety = 30
			add_prestige = 30
            dynasty = {
				add_dynasty_prestige = { 0 RICE_ancestor_max_dynasty_prestige_large_value }
			}
			every_close_family_member = {
				limit = {
					NOR = {
						has_relation_rival = root
						has_relation_potential_rival = root
					}
				}
                add_opinion = {
                    modifier = TCT_saint_days_procession_opinion
                    target = root
                    opinion = 15
                }
                add_character_flag = {
					flag = received_TCT_opinion
					days = 2
				}
            }	
            hidden_effect = {
            	every_vassal = {
            	    limit = {
            	        NOT = { has_character_flag = received_TCT_opinion }
            	    }
            	    add_opinion = {
            	        modifier = TCT_saint_days_procession_opinion
            	        target = root
            	        opinion = 10
            	    }
					add_character_flag = {
						flag = received_TCT_opinion
						days = 2
					}
            	}
				scope:activity = {
					every_attending_character = {
						limit = {
            		        NOR = {
								this = root
								has_character_flag = received_TCT_opinion
							}
            		    }
            		    add_opinion = {
            		        modifier = TCT_saint_days_procession_opinion
            		        target = root
            		        opinion = 5
            		    }
            		}
            		activity_location.county = {
            		    change_county_control = 5
            		}
				}
			}
			custom_tooltip = TCT_saint_days.0004.opinion.tooltip.b
		}
        custom_tooltip = TCT_saint_days.0004.a.tooltip
        trigger_event = {
			id = TCT_saint_days.0005
			days = { 4 12 }
		}
	}
}

# Saint's Day Celebration
TCT_saint_days.0005 = {
	type = activity_event
	title = TCT_saint_days.0005.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					AND = {
						has_activity_intent = TCT_saint_days_reverence_intent
						scope:activity = {
							has_activity_option = {
								category = special_type
								option = TCT_saint_days_type_reverence
							}
						}
					}
				}
				desc = TCT_saint_days.0005.desc.reverence_reverence
			}
			triggered_desc = {
				trigger = {
					AND = {
						has_activity_intent = TCT_saint_days_reverence_intent
						scope:activity = {
							has_activity_option = {
								category = special_type
								option = TCT_saint_days_type_tradition
							}
						}
					}
				}
				desc = TCT_saint_days.0005.desc.tradition_reverence
			}
			triggered_desc = {
				trigger = {
					AND = {
						has_activity_intent = TCT_saint_days_reverence_intent
						scope:activity = {
							has_activity_option = {
								category = special_type
								option = TCT_saint_days_type_festivity
							}
						}
					}
				}
				desc = TCT_saint_days.0005.desc.festivity_reverence
			}
			triggered_desc = {
				trigger = {
					AND = {
						has_activity_intent = TCT_saint_days_gratitude_intent
						scope:activity = {
							has_activity_option = {
								category = special_type
								option = TCT_saint_days_type_reverence
							}
						}
					}
				}
				desc = TCT_saint_days.0005.desc.reverence_gratitude
			}
			triggered_desc = {
				trigger = {
					AND = {
						has_activity_intent = TCT_saint_days_gratitude_intent
						scope:activity = {
							has_activity_option = {
								category = special_type
								option = TCT_saint_days_type_tradition
							}
						}
					}
				}
				desc = TCT_saint_days.0005.desc.tradition_gratitude
			}
			triggered_desc = {
				trigger = {
					AND = {
						has_activity_intent = TCT_saint_days_gratitude_intent
						scope:activity = {
							has_activity_option = {
								category = special_type
								option = TCT_saint_days_type_festivity
							}
						}
					}
				}
				desc = TCT_saint_days.0005.desc.festivity_gratitude
			}
			triggered_desc = {
				trigger = {
					AND = {
						has_activity_intent = TCT_saint_days_atonement_intent
						scope:activity = {
							has_activity_option = {
								category = special_type
								option = TCT_saint_days_type_reverence
							}
						}
					}
				}
				desc = TCT_saint_days.0005.desc.reverence_atonement
			}
			triggered_desc = {
				trigger = {
					AND = {
						has_activity_intent = TCT_saint_days_atonement_intent
						scope:activity = {
							has_activity_option = {
								category = special_type
								option = TCT_saint_days_type_tradition
							}
						}
					}
				}
				desc = TCT_saint_days.0005.desc.tradition_atonement
			}
			triggered_desc = {
				trigger = {
					AND = {
						has_activity_intent = TCT_saint_days_atonement_intent
						scope:activity = {
							has_activity_option = {
								category = special_type
								option = TCT_saint_days_type_festivity
							}
						}
					}
				}
				desc = TCT_saint_days.0005.desc.festivity_atonement
			}
		}
	}
	theme = host_dinner
	
	right_portrait = {
		character = scope:host
		triggered_animation = {
			trigger = {
				scope:activity = {
					has_activity_option = {
						category = special_type
						option = TCT_saint_days_type_reverence
					}
				}
			}
			animation = personality_zealous
		}
		triggered_animation = {
			trigger = {
				scope:activity = {
					has_activity_option = {
						category = special_type
						option = TCT_saint_days_type_tradition
					}
				}
			}
			animation = idle
		}
		triggered_animation = {
			trigger = {
				scope:activity = {
					has_activity_option = {
						category = special_type
						option = TCT_saint_days_type_festivity
					}
				}
			}
			animation = toast_goblet
		}
	}
	left_portrait = {
		character = scope:attendee
		trigger = {
			exists = scope:attendee
		}
		triggered_animation = {
			trigger = {
				scope:activity = {
					has_activity_option = {
						category = special_type
						option = TCT_saint_days_type_reverence
					}
				}
			}
			animation = personality_forgiving
		}
		triggered_animation = {
			trigger = {
				scope:activity = {
					has_activity_option = {
						category = special_type
						option = TCT_saint_days_type_tradition
					}
				}
			}
			animation = admiration
		}
		triggered_animation = {
			trigger = {
				scope:activity = {
					has_activity_option = {
						category = special_type
						option = TCT_saint_days_type_festivity
					}
				}
			}
			animation = toast
		}
	}

	immediate = {
		scope:activity = {
			random_attending_character = {
				limit = {
					NOT = { this = root }
				}
				save_scope_as = attendee
			}
		}
		root = {
			add_character_flag = {
				flag = hosted_saint_day
				years = 10
			}
			#faith = { #DEBUG
			#	add_to_variable_list = {
			#		name = held_saints_day
			#		target = scope:host
			#	}
			#} #/DEBUG
		}
	}
	
	option = { # Ok
		name = TCT_saint_days.0005.a
        if = {
			limit = {
				AND = {
					has_activity_intent = TCT_saint_days_reverence_intent
					scope:activity = {
						has_activity_option = {
							category = special_type
							option = TCT_saint_days_type_reverence
						}
					}
				}
			}
			add_piety = {
				value = 100
				add = { 50 RICE_ancestor_max_bonus_value }
			}
			add_prestige = { 20 RICE_ancestor_max_bonus_value }
            stress_impact = {
                zealous = minor_stress_impact_loss
                diligent = minor_stress_impact_loss
            }
		}
		else_if = {
			limit = {
				AND = {
					has_activity_intent = TCT_saint_days_reverence_intent
					scope:activity = {
						has_activity_option = {
							category = special_type
							option = TCT_saint_days_type_tradition
						}
					}
				}
			}
			add_piety = { 10 RICE_ancestor_max_bonus_value }
			add_prestige = {
				value = 100
				add = { 60 RICE_ancestor_max_bonus_value }
			}
			stress_impact = {
                zealous = minor_stress_impact_loss
                diligent = minor_stress_impact_loss
            }
		}
		else_if = {
			limit = {
				AND = {
					has_activity_intent = TCT_saint_days_reverence_intent
					scope:activity = {
						has_activity_option = {
							category = special_type
							option = TCT_saint_days_type_festivity
						}
					}
				}
			}
			add_piety = { 10 RICE_ancestor_max_bonus_value }
			add_prestige = { 40 RICE_ancestor_max_bonus_value }
            add_stress = minor_stress_loss
            stress_impact = {
				zealous = minor_stress_impact_loss
                diligent = minor_stress_impact_loss
                lifestyle_reveler = minor_stress_impact_loss
		    	gregarious = minor_stress_impact_loss
                drunkard = minor_stress_impact_loss
				shy = minor_stress_impact_gain
                paranoid = minor_stress_impact_gain
            }
		}
		else_if = {
			limit = {
				AND = {
					has_activity_intent = TCT_saint_days_gratitude_intent
					scope:activity = {
						has_activity_option = {
							category = special_type
							option = TCT_saint_days_type_reverence
						}
					}
				}
			}
			add_piety = {
				value = 100
				add = { 60 RICE_ancestor_max_bonus_value }
			}
			add_prestige = { 10 RICE_ancestor_max_bonus_value }
			stress_impact = {
				content = minor_stress_impact_loss
				generous = minor_stress_impact_loss
			}
		}
		else_if = {
			limit = {
				AND = {
					has_activity_intent = TCT_saint_days_gratitude_intent
					scope:activity = {
						has_activity_option = {
							category = special_type
							option = TCT_saint_days_type_tradition
						}
					}
				}
			}
			add_piety = { 20 RICE_ancestor_max_bonus_value }
			add_prestige = {
				value = 100
				add = { 50 RICE_ancestor_max_bonus_value }
			}
			stress_impact = {
				content = minor_stress_impact_loss
				generous = minor_stress_impact_loss
			}
		}
		else_if = {
			limit = {
				AND = {
					has_activity_intent = TCT_saint_days_gratitude_intent
					scope:activity = {
						has_activity_option = {
							category = special_type
							option = TCT_saint_days_type_festivity
						}
					}
				}
			}
			add_piety = { 20 RICE_ancestor_max_bonus_value }
			add_prestige = { 30 RICE_ancestor_max_bonus_value }
            add_stress = minor_stress_loss
            stress_impact = {
				content = minor_stress_impact_loss
				generous = minor_stress_impact_loss
				zealous = minor_stress_impact_loss
                diligent = minor_stress_impact_loss
                lifestyle_reveler = minor_stress_impact_loss
		    	gregarious = minor_stress_impact_loss
                drunkard = minor_stress_impact_loss
				shy = minor_stress_impact_gain
                paranoid = minor_stress_impact_gain
            }
		}
		else_if = {
			limit = {
				AND = {
					has_activity_intent = TCT_saint_days_atonement_intent
					scope:activity = {
						has_activity_option = {
							category = special_type
							option = TCT_saint_days_type_reverence
						}
					}
				}
			}
			add_piety = {
				value = 100
				add = { 70 RICE_ancestor_max_bonus_value }
			}
			add_prestige = { 0 RICE_ancestor_max_bonus_value }
			stress_impact = {
                honest = minor_stress_impact_loss
                humble = minor_stress_impact_loss
            }
		}
		else_if = {
			limit = {
				AND = {
					has_activity_intent = TCT_saint_days_atonement_intent
					scope:activity = {
						has_activity_option = {
							category = special_type
							option = TCT_saint_days_type_tradition
						}
					}
				}
			}
			add_piety = { 30 RICE_ancestor_max_bonus_value }
			add_prestige = {
				value = 100
				add = { 40 RICE_ancestor_max_bonus_value }
			}
			stress_impact = {
                honest = minor_stress_impact_loss
                humble = minor_stress_impact_loss
            }
		}
		else_if = {
			limit = {
				AND = {
					has_activity_intent = TCT_saint_days_atonement_intent
					scope:activity = {
						has_activity_option = {
							category = special_type
							option = TCT_saint_days_type_festivity
						}
					}
				}
			}
			add_piety = { 30 RICE_ancestor_max_bonus_value }
			add_prestige = { 20 RICE_ancestor_max_bonus_value }
            add_stress = minor_stress_loss
            stress_impact = {
				honest = minor_stress_impact_loss
                humble = minor_stress_impact_loss
				zealous = minor_stress_impact_loss
                diligent = minor_stress_impact_loss
                lifestyle_reveler = minor_stress_impact_loss
		    	gregarious = minor_stress_impact_loss
                drunkard = minor_stress_impact_loss
				shy = minor_stress_impact_gain
                paranoid = minor_stress_impact_gain
            }
		}
	}

	after = {
		hidden_effect = {
			if = {
				limit = {
					root = scope:host
				}
				scope:activity = {
					hidden_effect = { skip_activity_phase = yes }
				}
			}
		}
	}
}