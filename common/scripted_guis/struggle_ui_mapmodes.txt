tct_investiture_controversy_check = {
	scope = strugge
	is_shown = {
		this = struggle:investiture_controversy_struggle
	}
}

struggle_supporter_mapmode = {
	effect = {
		every_barony = {
			if = {
				limit = {
					county.holder = {
						has_trait = tct_imperial_supporter
					}
				}
				set_color_from_title = title:d_line_map_free_investiture
			}

      		else_if = {
        		limit = {
          			county.holder = {
            			has_trait = tct_papal_supporter
          			}
        		
				}
        		set_color_from_title = title:d_line_map_papal_investiture
      		}

      		else = {
        		set_color_from_title = title:d_line_map_base
     		}
    	}
	}
}

reset_barony_colors = {
	is_valid = {
		exists = global_var:custom_map_mode
	}
	effect = {
    	every_barony = {
      		set_color_from_title = county
    	}
  	}
}
